<!DOCTYPE html>
<html>
<head>
	<title>Index</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      margin-top: 50px;
    }

    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 30px;
    }

    label {
      font-weight: bold;
      margin-bottom: 10px;
    }

    input[type="text"],
    input[type="date"],
    input[type="submit"] {
      padding: 5px;
      margin-bottom: 20px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    input[type="submit"] {
      background-color: #4CAF50;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    #filterInput {
      padding: 5px;
      margin-bottom: 20px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    table {
      border-collapse: collapse;
      margin-top: 30px;
      width: 50%;
      margin: auto;
      text-align: center;
    }

    th,
    td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #4CAF50;
      color: white;
    }

    #result {
      max-height: 200px;
      overflow-y: scroll;
      text-align: center;
    }

    /* Style the table */
    table {
      border-collapse: collapse;
      width: 100%;
      text-align: center;
    }

    th, td {
      text-align: left;
      padding: 8px;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }

    tr:hover {
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>
	<h1>Enter a Word and a Date</h1>
	<form id="form">
		<label for="word">Word:</label>
		<input type="text" id="word" name="word" required>
		<br>
		<label for="date">Date:</label>
		<input type="date" id="date" name="date" required>
		<br>
		<input type="submit" value="Submit">
	</form>
  <div>
    <input type="text" id="filterInput" placeholder="Search...">
  </div>
  <div id="result"></div>

	<script>
		document.getElementById("form").addEventListener("submit", function(event) {
			event.preventDefault(); // prevent the form from submitting and reloading the page
			let word = document.getElementById("word").value;
			let date = document.getElementById("date").value;
			fetch('/submit', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({word: word, date: date})
			})
			.then(response => response.json())
			.then(data => {
				let resultDiv = document.getElementById("result");
        let htmlString = "<h2>Result:</h2><table><tr><th>Result</th></tr>";
        data['Results'].forEach(element => {
          htmlString += "<tr><td>" + element + "</td></tr>";
        });
        htmlString += "</table>";
        resultDiv.innerHTML = htmlString;

        // Filter functionality
        const filterInput = document.getElementById('filterInput');
        filterInput.addEventListener('keyup', function() {
          const filterValue = filterInput.value.toUpperCase();
          const tableRows = resultDiv.getElementsByTagName('tr');
          for (let i = 0; i < tableRows.length; i++) {
            const row = tableRows[i].getElementsByTagName('td')[0];
            if (row) {
              const textValue = row.textContent || row.innerText;
              if (textValue.toUpperCase().indexOf(filterValue) > -1) {
                tableRows[i].style.display = '';
              } else {
                tableRows[i].style.display = 'none';
              }
            }
         }
        });
      })
			.catch(error => console.error(error));
		});
	</script>
</body>
</html>